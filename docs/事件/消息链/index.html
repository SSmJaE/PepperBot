<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/PepperBot/blog/rss.xml" title="PepperBot Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/PepperBot/blog/atom.xml" title="PepperBot Docs Blog Atom Feed"><title data-react-helmet="true">消息链 | PepperBot Docs</title><meta data-react-helmet="true" property="og:url" content="https://github.com/SSmJaE/PepperBot/docs/事件/消息链"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="消息链 | PepperBot Docs"><meta data-react-helmet="true" name="description" content="最后一步"><meta data-react-helmet="true" property="og:description" content="最后一步"><link data-react-helmet="true" rel="shortcut icon" href="/PepperBot/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/SSmJaE/PepperBot/docs/事件/消息链"><link data-react-helmet="true" rel="alternate" href="https://github.com/SSmJaE/PepperBot/docs/事件/消息链" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/SSmJaE/PepperBot/docs/事件/消息链" hreflang="x-default"><link rel="stylesheet" href="/PepperBot/assets/css/styles.da5cc4c5.css">
<link rel="preload" href="/PepperBot/assets/js/styles.187e5cf6.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/runtime~main.87230d1c.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/main.d4c4ddc7.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/1.861becf9.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/2.9701dd1a.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/3.9b9fbbf5.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/1be78505.986bbde4.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/53.54d2b9b8.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/935f2afb.0dcc4497.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/17896441.be528db8.js" as="script">
<link rel="preload" href="/PepperBot/assets/js/2869e301.7efa4a7d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/PepperBot/"><img src="/PepperBot/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/PepperBot/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PepperBot</strong></a><a class="navbar__item navbar__link" href="/PepperBot/docs/概览/">教程</a><a class="navbar__item navbar__link" href="/PepperBot/docs/API/">示例</a><a class="navbar__item navbar__link" href="/PepperBot/docs/实战/">实战</a><a class="navbar__item navbar__link" href="/PepperBot/docs/API/">API</a><a class="navbar__item navbar__link" href="/PepperBot/docs/API/">贡献指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SSmJaE/PepperBot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"> </a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/PepperBot/"><img src="/PepperBot/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/PepperBot/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">PepperBot</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/PepperBot/docs/概览/">教程</a></li><li class="menu__list-item"><a class="menu__link" href="/PepperBot/docs/API/">示例</a></li><li class="menu__list-item"><a class="menu__link" href="/PepperBot/docs/实战/">实战</a></li><li class="menu__list-item"><a class="menu__link" href="/PepperBot/docs/API/">API</a></li><li class="menu__list-item"><a class="menu__link" href="/PepperBot/docs/API/">贡献指南</a></li><li class="menu__list-item"><a href="https://github.com/SSmJaE/PepperBot" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"> </a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">概览</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/概览/">动机</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/概览/关于">关于</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/概览/架构">架构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/概览/如何使用本文档">如何使用本文档</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">环境搭建</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">PepperBot配置</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/环境/PepperBot安装">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/环境/PepperBot对接">对接协议</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">协议配置</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/环境/配置QQ">配置QQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/环境/配置微信">配置微信</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/环境/配置Telegram">配置Telegram</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/环境/配置Discord">配置Discord</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">响应事件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/事件/路由">路由</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/事件/事件参数">事件参数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/事件/群消息响应">群消息响应</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/PepperBot/docs/事件/消息链">消息链</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">主动行为</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/行为/一次性任务">一次性任务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/行为/定时任务">定时任务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/行为/行为链">行为链</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/行为/web调度">web调度</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">指令</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/指令/何时使用指令">何时使用指令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/指令/声明一个指令">声明一个指令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/指令/使用指令">使用指令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/指令/指令的作用范围">指令的作用范围</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">部署</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/部署/两套配置文件">两套配置文件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/部署/日志">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/PepperBot/docs/部署/linux下部署">linux下部署</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">消息链</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="最后一步"></a>最后一步<a class="hash-link" href="#最后一步" title="Direct link to heading">#</a></h2><p>在动手定义群消息事件响应之前，我们最后，还需要了解一下消息链的概念</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="什么是消息链"></a>什么是消息链<a class="hash-link" href="#什么是消息链" title="Direct link to heading">#</a></h2><p>消息片段</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="为什么称为链"></a>为什么称为链<a class="hash-link" href="#为什么称为链" title="Direct link to heading">#</a></h2><p>消息链就是我们实际上接受到的消息，通常又有表情，又有文字，或者又有文字，又有图片</p><p>组成消息的每一个单元，称为一个消息片段</p><p>比如这样一条消息</p><p><img src="data:image/png;base64,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"></p><p>实际上由三个片段组成，分别是</p><ul><li>文字片段(Text)12345</li><li>表情片段(Face)滑稽</li><li>文字片段 67890</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可用的消息片段"></a>可用的消息片段<a class="hash-link" href="#可用的消息片段" title="Direct link to heading">#</a></h2><p>PepperBot 的消息类型基本符合 OneBot 协议，因为主要后端是 go-cqhttp，所以以 go-cqhttp 支持的有限</p><p>可用的消息片段可以参考<a href="https://github.com/SSmJaE/PepperBot/blob/master/pepperbot/message/segment.py" target="_blank" rel="noopener noreferrer">这个文件</a></p><p>go-cqhttp 对消息片段的支持，可见<a href="https://docs.go-cqhttp.org/cqcode/#qq-%E8%A1%A8%E6%83%85" target="_blank" rel="noopener noreferrer">此处</a></p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>发送语音和视频，需要将 ffmpeg 放至 go-cqhttp.exe 同目录下，或者将 ffmpeg 的可执行文件添加至系统变量</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接受到的消息链"></a>接受到的消息链<a class="hash-link" href="#接受到的消息链" title="Direct link to heading">#</a></h2><p>在接受到群消息之后，PepperBot 会自动将接收到的消息，转换成符合 PepperBot 的消息链，并提供了一定的属性和方法，便于操作消息链</p><p>类型为 MessageChain 的 chain 参数，即为消息链
chain 实例的 chain 属性，即 chain.chain，就是事实上的消息链，他是一个列表，包含所有消息片段，可以迭代</p><p>当然，也可以直接迭代指定类型的消息片段，</p><p>比如迭代所有图片，可以直接 for image in chain.images，</p><p>迭代所有表情，for face in chain.faces</p><p>诸如此类</p><p>文字有所不同，并没有提供 chain.text 这样一个属性，而是提供了 chain.pure_text,</p><p>还是<img src="data:image/png;base64,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">这个例子</p><p>chain.pure_text 无视了两个文字片段中间的表情类型片段，最后组合成了一个字符串，字符串的值为&quot;1234567890&quot;</p><p>pure_text 在判断消息的文字内容是比较有用</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="操作消息链"></a>操作消息链<a class="hash-link" href="#操作消息链" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="字符串可以直接-in"></a>字符串可以直接 in<a class="hash-link" href="#字符串可以直接-in" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert &quot;word&quot; in chain</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="只取-pure_text"></a>只取 pure_text<a class="hash-link" href="#只取-pure_text" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert &quot;123&quot; not in chain</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可以判断是否指定类型"></a>可以判断是否指定类型<a class="hash-link" href="#可以判断是否指定类型" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert Text in chain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has(Text) == True</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可以判断是否指定类型的实例"></a>可以判断是否指定类型的实例<a class="hash-link" href="#可以判断是否指定类型的实例" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert Text(&quot;word2&quot;) not in chain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert Text(&quot;word word&quot;) in chain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has(Text(&quot;word word&quot;)) == True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has(Text(&quot;word word1&quot;)) == False</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has(Face(123)) == True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has(Face(124)) == False</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="快捷方式"></a>快捷方式<a class="hash-link" href="#快捷方式" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has_and_first(Text) == (True, Text(&quot;word word&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has_and_last(Text) == (True, Text(&quot;word word2&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.has_and_all(Text) == (True, [Text(&quot;word word&quot;), Text(&quot;word word2&quot;)])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="获取所有指定类型实例"></a>获取所有指定类型实例<a class="hash-link" href="#获取所有指定类型实例" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.faces == [Face(123)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain.text == [Text(&quot;word word&quot;), Text(&quot;word word2&quot;)]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="按-index-取-segment"></a>按 index 取 Segment<a class="hash-link" href="#按-index-取-segment" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert chain[1] == Text(&quot;word word&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可以直接判断实例"></a>可以直接判断实例<a class="hash-link" href="#可以直接判断实例" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly py3"><div tabindex="0" class="prism-code language-py3 codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert Text(&quot;word word&quot;) == Text(&quot;word word&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert Text(&quot;word word&quot;) != Text(&quot;word word2&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="手动构造消息链"></a>手动构造消息链<a class="hash-link" href="#手动构造消息链" title="Direct link to heading">#</a></h2><blockquote><p>PepperBot 提供了非常方便的构造消息片段，以及组合消息链的方式</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="直接传入"></a>直接传入<a class="hash-link" href="#直接传入" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数返回"></a>函数返回<a class="hash-link" href="#函数返回" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="列表解构，args"></a>列表解构，*args<a class="hash-link" href="#列表解构，args" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="消息链上绑定的方法"></a>消息链上绑定的方法<a class="hash-link" href="#消息链上绑定的方法" title="Direct link to heading">#</a></h2><p>chain.reply</p><p>chain.withdraw()</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/SSmJaE/PepperBot/edit/master/docs/docs/事件/消息链.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-02-02T11:44:08.000Z" class="lastUpdatedDate_1WI_">2/2/2022</time> by <strong>SSmJaE</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/PepperBot/docs/事件/群消息响应"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 群消息响应</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/PepperBot/docs/行为/一次性任务"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">一次性任务 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#最后一步" class="table-of-contents__link">最后一步</a></li><li><a href="#什么是消息链" class="table-of-contents__link">什么是消息链</a></li><li><a href="#为什么称为链" class="table-of-contents__link">为什么称为链</a></li><li><a href="#可用的消息片段" class="table-of-contents__link">可用的消息片段</a></li><li><a href="#接受到的消息链" class="table-of-contents__link">接受到的消息链</a></li><li><a href="#操作消息链" class="table-of-contents__link">操作消息链</a><ul><li><a href="#字符串可以直接-in" class="table-of-contents__link">字符串可以直接 in</a></li><li><a href="#只取-pure_text" class="table-of-contents__link">只取 pure_text</a></li><li><a href="#可以判断是否指定类型" class="table-of-contents__link">可以判断是否指定类型</a></li><li><a href="#可以判断是否指定类型的实例" class="table-of-contents__link">可以判断是否指定类型的实例</a></li><li><a href="#快捷方式" class="table-of-contents__link">快捷方式</a></li><li><a href="#获取所有指定类型实例" class="table-of-contents__link">获取所有指定类型实例</a></li><li><a href="#按-index-取-segment" class="table-of-contents__link">按 index 取 Segment</a></li><li><a href="#可以直接判断实例" class="table-of-contents__link">可以直接判断实例</a></li></ul></li><li><a href="#手动构造消息链" class="table-of-contents__link">手动构造消息链</a><ul><li><a href="#直接传入" class="table-of-contents__link">直接传入</a></li><li><a href="#函数返回" class="table-of-contents__link">函数返回</a></li><li><a href="#列表解构，args" class="table-of-contents__link">列表解构，*args</a></li></ul></li><li><a href="#消息链上绑定的方法" class="table-of-contents__link">消息链上绑定的方法</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/PepperBot/assets/js/styles.187e5cf6.js"></script>
<script src="/PepperBot/assets/js/runtime~main.87230d1c.js"></script>
<script src="/PepperBot/assets/js/main.d4c4ddc7.js"></script>
<script src="/PepperBot/assets/js/1.861becf9.js"></script>
<script src="/PepperBot/assets/js/2.9701dd1a.js"></script>
<script src="/PepperBot/assets/js/3.9b9fbbf5.js"></script>
<script src="/PepperBot/assets/js/1be78505.986bbde4.js"></script>
<script src="/PepperBot/assets/js/53.54d2b9b8.js"></script>
<script src="/PepperBot/assets/js/935f2afb.0dcc4497.js"></script>
<script src="/PepperBot/assets/js/17896441.be528db8.js"></script>
<script src="/PepperBot/assets/js/2869e301.7efa4a7d.js"></script>
</body>
</html>